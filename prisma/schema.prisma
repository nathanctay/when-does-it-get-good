generator client {
  provider = "prisma-client"
  output   = "../generated/prisma"
}

datasource db {
  provider = "postgresql"
}

model shows {
  id            Int       @id @default(autoincrement())
  tmdb_id       Int       @unique
  title         String    @db.VarChar(255)
  poster_path   String?   @db.VarChar(255)
  total_seasons Int?
  last_updated  DateTime? @default(now()) @db.Timestamp(6)
  votes         votes[]
}

model votes {
  id          Int       @id @default(autoincrement())
  show_id     Int?
  season_no   Int
  episode_no  Int
  tag         String?   @db.VarChar(32)
  fingerprint String    @db.VarChar(64)
  created_at  DateTime? @default(now()) @db.Timestamp(6)
  shows       shows?    @relation(fields: [show_id], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([fingerprint, show_id], map: "idx_votes_fingerprint_show")
  @@index([show_id], map: "idx_votes_show_id")
}

model feedback {
  id         Int      @id @default(autoincrement())
  email      String   @db.VarChar(255)
  subject    String?  @db.VarChar(255)
  message    String   @db.Text
  created_at DateTime @default(now()) @db.Timestamp(6)
}
